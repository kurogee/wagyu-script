シャープ関数
---
シャープ関数とはこの言語独自の機能で、この言語の関数の特性上、引数中に普通の関数を入れることが出来ないため、純粋に値を返す、引数に値を渡すような関数を作りたいと思い作りました。

基本的な形
---
シャープ関数の基本的な形は以下のとおりです。シャープ関数は、関数名の前に``#``をつけることで呼び出すことが出来ます。
```
#関数名(引数1 引数2 ...)
```
※ 関数名と引数の間にスペースは開けません。（スペースが開けられるように、只今検討中です。）

例えば、get-started.mdの例で出てくる``#(2 + 3)``のような形の関数を例に取ると、以下のような形になります。
```
println #(2 + 3);
```
こうすることで、``println``の関数の引数に``2 + 3``の計算結果つまり``5``が入ることになります。これがシャープ関数の基本的な使い方です。

標準の関数一覧
---
この説明の例に出てくる変数は、それぞれ以下のような値が入っているとします。
```
arr = array ("apple" "banana" "orange" "grape");
val = value "Wagyu";
num = value 10;
```
※ 実行した結果の返り値が小数だった場合、その有効数字は関数によって違うかもしれません。

| 関数名 | 実行内容 | 例 |
|---|---|---|
| arrayAt(配列名 インデックス) | 配列の任意のインデックスの値を返します | ``#arrayAt(arr 2)`` → ``"orange"``|
| arrayLen(配列名) | 配列の長さを返します | ``#arrayLen(arr)`` → ``4`` |
| at(文字列 インデックス) | 文字列の任意のインデックスの文字を返します | ``#at("Hello, World!" 7)`` → ``"W"`` |
| len(値or変数名) | 値の長さを返します | ``#len(val)`` → ``5`` |
| from(整数値1 整数値2) | ``整数値1``から``整数値2``までの範囲の連番が入った配列を作成します | ``#from(1 10)`` → ``(1 2 3 ... 9 10)`` |
| format(フォーマット 変数1 変数2 ...) | ``printf``のようなフォーマットをした文字列を返します | ``#format("Hello, :1:." val)`` → ``"Hello, Wagyu."`` |
| remove(配列名 インデックス) | 配列からインデックスの場所の値を削除した配列を返します | ``#remove(arr 1)`` → ``("apple" "orange" "grape")`` |
| rand(整数値1 整数値2) | ``整数値1``から``整数値2``までの範囲の乱数を返します | ``#rand(1 10)`` → ``(1〜10までの乱数)`` |
| convert(値or変数名 型名) | 値の型を変換します | ``#convert(num float)`` → ``10.00`` |
| var(変数名 値) | 変数を宣言・初期化して、関数を入れた引数には変数名を入れます | ``println #var(x 10);`` → ``10`` （変数``x``に``10``が入り、``10``と出力されます。） |
| repeat(文字列 繰り返し回数) | 文字列を指定回数繰り返した文字列を返します | ``#repeat("Hello, " 3)`` → ``"Hello, Hello, Hello, "`` |
| all(配列もしくは任意個の引数) | 引数が全て``true``もしくは``1``の場合``true``を返します | ``#all(true false true)`` → ``false`` |
| any(配列もしくは任意個の引数) | 引数の中に``true``もしくは``1``が1つでもある場合``true``を返します | ``#any(true false true)`` → ``true`` |

自分で関数を作る
---
シャープ関数も普通の関数同様、自分で作ることが出来ます。基本的に以下のように書きます。
```
sharp 関数名 (引数1 引数2 ...) {
    処理...;
    return 返り値;
};
```
※ 関数名と引数の間にスペースを開けます。

この関数は``#関数名(引数1 引数2 ...)``の形で呼び出すことができ、この関数を入れた所に``return``での返り値が返ります。

以下は、引数に入れた2数の和を返すシャープ関数の例です。
```
sharp add ($a $b) {
    return #($a + $b);
};

println #add(2 3);
// -> 「5」が出力されます。;
```

他パッケージの関数一覧
---

### math パッケージ
maths パッケージでは数学に関する演算をします。表の``関数名``欄では省略しますが関数の形は``#math.関数名``の形です。

この説明の例に出てくる変数は、それぞれ以下のような値が入っているとします。
```
arr = array (2 3 1 5 4);
```

| 関数名 | 実行内容 | 例 |
|---|---|---|
| pi() | 円周率を返します | ``3.1415926535`` |
| e() | ネイピア数を返します | ``2.7182818284`` |
| cos(値) | 値のコサインを返します | ``#math.cos(0)`` → ``1.00`` |
| sin(値) | 値のサインを返します | ``#math.sin(0)`` → ``0.00`` |
| tan(値) | 値のタンジェントを返します | ``#math.tan(0)`` → ``0.00`` |
| acos(値) | 値のアークコサインを返します | ``#math.acos(1)`` → ``0.00`` |
| asin(値) | 値のアークサインを返します | ``#math.asin(0)`` → ``0.00`` |
| atan(値) | 値のアークタンジェントを返します | ``#math.atan(0)`` → ``0.00`` |
| sqrt(値) | 値の平方根を返します | ``#math.sqrt(4)`` → ``2.00`` |
| pow(値1 値2) | 値1の値2乗を返します | ``#math.pow(2 3)`` → ``8.00`` |
| log(値) | 値の自然対数を返します | ``#math.log(2.7182818284)`` → ``1.00`` |
| log10(値) | 値の常用対数を返します | ``#math.log10(10)`` → ``1.00`` |
| abs(値) | 値の絶対値を返します | ``#math.abs(-1)`` → ``1.00`` |
| median(配列) | 配列の中央値を返します | ``#math.median(arr)`` → ``3.00`` |
| mode(配列) | 配列の最頻値を返します。どれも同じ回数出現する場合は最初の値を返します | ``#math.mode(arr)`` → ``2.00`` |
| average(配列) | 配列の平均値を返します | ``#math.average(arr)`` → ``3.00`` |
| floor(値) | 値の小数点以下を切り捨てた値を返します | ``#math.floor(3.14)`` → ``3.00`` |
| ceil(値) | 値の小数点以下を切り上げた値を返します | ``#math.ceil(3.14)`` → ``4.00`` |
| round(値 小数点以下の桁数) | 値を指定した桁数で四捨五入した値を返します | ``#math.round(3.14 1)`` → ``3.10`` |

### string パッケージ
string パッケージでは文字列に関する操作をします。表の``関数名``欄では省略しますが関数の形は``#string.関数名``の形です。

この説明の例に出てくる変数は、それぞれ以下のような値が入っているとします。
```
str = value "Hello, World!";
```

| 関数名 | 実行内容 | 例 |
|---|---|---|
| replace(対象の文字 置き換え前の文字 置き換え後の文字 置き換える回数) | ``対象の文字``の中で``置き換え前の文字``を``置き換え後の文字``に``置き換える回数``回置換します。``置き換える回数``は省略可能です。省略した場合は全て置換します。 | ``#string.replace(str "Hello" "Hi")`` → ``"Hi, World!"`` |
| include(値 文字列) | ``値``の中に``文字列``が含まれているかどうかを返します | ``#string.include(str "Hello")`` → ``true`` |
| substr(値 開始位置 長さ) | ``値``の中から``開始位置``から``長さ``分の部分文字列を返します | ``#string.substr(str 7 5)`` → ``"World"`` |

### array パッケージ
array パッケージでは配列に関する操作をします。表の``関数名``欄では省略しますが関数の形は``#array.関数名``の形です。

この説明の例に出てくる変数は、それぞれ以下のような値が入っているとします。
```
arr = array ("apple" "banana" "orange" "grape");
```

| 関数名 | 実行内容 | 例 |
|---|---|---|
| search(配列 値) | 配列の中で値が何番目にあるかを返します。ない場合は``-1``を返します | ``#array.search(arr "banana")`` → ``2`` |
| split(値 区切り文字) | 値を区切り文字で分割し、配列にして返します | ``#array.split(arr ",")`` → ``("apple" "banana" "orange" "grape")`` |
| join(配列 区切り文字) | 配列を区切り文字で結合し、文字列にして返します | ``#array.join(arr ",")`` → ``"apple,banana,orange,grape"`` |

### regex パッケージ
regex パッケージでは正規表現を使った文字列の操作をします。表の``関数名``欄では省略しますが関数の形は``#regex.関数名``の形です。

この説明の例に出てくる変数は、それぞれ以下のような値が入っているとします。
```
str = value "Hello, World!";
```

| 関数名 | 実行内容 | 例 |
|---|---|---|
| match(正規表現 値) | 値が正規表現にマッチするかどうかを返します | ``#regex.match("Hello" str)`` → ``true`` |
| find(正規表現 値) | 値の中で正規表現にマッチする部分を返します | ``#regex.find("Hello" str)`` → ``"Hello"`` |

### date パッケージ
date パッケージでは日付に関する操作をします。表の``関数名``欄では省略しますが関数の形は``#date.関数名``の形です。

| 関数名 | 実行内容 | 例 |
|---|---|---|
| nowFull() | 現在の日時を返します | ``2024-08-05 12:34:56`` |
| nowDate() | 現在の日付を返します | ``2024-08-05`` |
| nowTime() | 現在の時刻を返します | ``12:34:56`` |
| nowYear() | 現在の年を返します | ``2024`` |
| nowMonth() | 現在の月を返します | ``08`` |
| nowDay() | 現在の日を返します | ``05`` |
| nowHour() | 現在の時を返します | ``12`` |
| nowMinute() | 現在の分を返します | ``34`` |
| nowSecond() | 現在の秒を返します | ``56`` |
| nowDow (nowDayOfWeek) | 現在の曜日を返します | (0:日曜日 1:月曜日 2:火曜日 3:水曜日 4:木曜日 5:金曜日 6:土曜日) |
| nowUnix() | 現在のUNIX時間を返します | ``1234567890`` |

### file パッケージ
file パッケージではファイルに関する操作をします。表の``関数名``欄では省略しますが関数の形は``#file.関数名``の形です。

| 関数名 | 実行内容 | 例 |
|---|---|---|
| read(ファイル名) | ファイルを読み込みます | ``#file.read("sample.txt")`` |

### dict パッケージ
dict パッケージでは辞書に関する操作をします。表の``関数名``欄では省略しますが関数の形は``#dict.関数名``の形です。

| 関数名 | 実行内容 | 例 |
|---|---|---|
| get(辞書 キー) | 辞書の中からキーに対応する値を返します | ``#dict.get(dict "key")`` |
| check(辞書 キー) | 辞書の中にキーが存在するかどうかを返します | ``#dict.check(dict "key")`` |
| search(辞書 値) | 辞書の値に対応するキーを返します。ない場合は``-1``を返します | ``#dict.search(dict "value")`` |

Examples
---
### シャープ関数を効果的に用いた九九の表
```
x = array #from(1 9);
y = array #from(1 9);

each y > i {
    each x > j {
        res = value #(i * j);
        printf ":1::2:  " #repeat("0" #(2 - #len(res))) res;
    };
    println "";
};
```

### シャープ関数を使った素数判定（上級者向け）
```
sharp is_prime ($num) {
    match $num
    case (2 3 5 7) {
        return "true";
    };

    if #($num == 1) {
        return "false";
    } else {
        match $num
        case #(_ % 2 == 0) {
            return "false";
        }
        case #(_ % 3 == 0) {
            return "false";
        }
        case #(_ % 5 == 0) {
            return "false";
        }
        case #(_ % 7 == 0) {
            return "false";
        }
        default {
            return "true";
        };
    };
};

println #is_prime(89);
// -> 「true」が出力されます。;
```